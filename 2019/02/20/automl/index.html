<!DOCTYPE html><html><head><meta name="generator" content="Hexo 3.8.0"><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta name="description" content="automl"><meta name="keywords" content><meta name="author" content="zhuyuping"><meta name="copyright" content="zhuyuping"><title>automl | 朱遇平的github博客</title><link rel="shortcut icon" href="/melody-favicon.ico"><link rel="stylesheet" href="/css/index.css?version=1.6.0"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css?version=1.6.0"><link rel="dns-prefetch" href="https://cdn.staticfile.org"><link rel="dns-prefetch" href="https://cdn.bootcss.com"><link rel="dns-prefetch" href="https://creativecommons.org"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  }
} </script></head><body><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div id="sidebar"><div class="toggle-sidebar-info text-center"><span data-toggle="Toggle article">Toggle site</span><hr></div><div class="sidebar-toc"><div class="sidebar-toc__title">Catalog</div><div class="sidebar-toc__progress"><span class="progress-notice">You've read</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-5"><a class="toc-link" href="#这里带上个人一些个人评价吧："><span class="toc-number">1.</span> <span class="toc-text">这里带上个人一些个人评价吧：</span></a></li></ol></div></div><div class="author-info hide"><div class="author-info__avatar text-center"><img src="/img/avatar.png"></div><div class="author-info__name text-center">zhuyuping</div><div class="author-info__description text-center">掌握java相关知识，擅长大数据，以及机器学习算法应用方面 java scala python</div><hr><div class="author-info-articles"><a class="author-info-articles__archives article-meta" href="/archives"><span class="pull-left">Articles</span><span class="pull-right">1</span></a></div></div></div><div id="content-outer"><div class="no-bg" id="top-container"><div id="page-header"><span class="pull-left"> <a id="site-name" href="/">朱遇平的github博客</a></span><i class="fa fa-bars toggle-menu pull-right" aria-hidden="true"></i><span class="pull-right menus"><a class="site-page" href="/">Home</a><a class="site-page" href="/archives">Archives</a><a class="site-page" href="/tags">Tags</a><a class="site-page" href="/categories">Categories</a></span></div><div id="post-info"><div id="post-title">automl</div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 2019-02-20</time></div></div></div><div class="layout" id="content-inner"><article id="post"><div class="article-container" id="post-content"><p>   <strong>个人介绍：</strong><br>          以前在喜马拉雅平台架构，做了分布式日志系统，分布式风控系统，分布式大数据平台，数据仓库相关核心开发，后来来到美团，负责风控系统rcData数据平台，以及rcfraud审批平台，以前喜马拉雅风控是第三代第四代，这里是第一代。在这期间完成了审批流程抽象抽取，生活费异步审批的封装，人行报告的解析落地。批量大数据处理贷后数据。个人java基础知识扎实，高并发，因为架构qps高，所以对于高并发场景，日常中幂等，降级 熔断 自动扩容，负载均衡，服务化，限流，缓存，分库分区分表，性能调优，大数据，分布式中间件kafaka ,相关newSQL nosql,监控报警，服务编排等手段来解决这方面的问题，术业有专攻，个人比较擅长大数据以及大数据相关体系的技能。懂机器学习算法原理，能够熟练运用使用机器学习算法,深度学习也能运用,在喜马拉雅以及美团以及以前工作有过这方面的开发经验。语言方面：java scala 比较熟练，python sdk没有java scala熟悉，但能写能改。页面也能写一些。      </p>
<p>   个人从12月底左右空余时间开始想做一个自动化机器学习平台，为什么想做这个平台，一方面是一个学习提升能力项目，一方面是希望能展示自己的能力，另一方面是公司做的东西因为涉及公司机密无法展示，所以想通过这个平台来展示一下自己的能力，因为空余时间有限，周六周末偶尔做一下，所以并没有完整做完，只完成了核心部分，这里就展示一下个人的设计思路链条。</p>
<p>   参考了阿里的PAI ，因为PAI 是中断的，对于每一个节点处理，然后通过airflow类似工作流来管理流程，产生很多中间数据，会依赖很多脚本运行，我的想法是 对于数据读取 数据清洗 数据转换 特征工程 算法模型 超参数优化，这应该是一个pipeline过程，而每一个pipeline 流程可以有上下依赖的关系，这样大的pipeline流程使用airflow来管理依赖，小的pipeline流程直接使用DAG 有向无环图的结构来管理 类似spark 中DAG 管理宽窄依赖使用深度优先遍历来逐步初始化 compose模式搭建积木来构建一个完整流程代码。<br>   首先看看我的设计图</p>
<p>   <img src="http://autometis.oss-cn-shanghai.aliyuncs.com/automl/flowdesigner01.jpg" alt></p>
<p>   从大的方向主要分为四个层：<br>   引擎层、拓扑图层 、UI可视化层、任务调度层<br>   主要原理就是通过对图的构建，通过前端jsplumb可视化技术来实现拖拉生成相关图，然后进行graphml系列化，最后通过DFS 遍历获取每一个节点Node 通过compose模式动态生成相应的引擎代码，交给lts分布式任务系统动态运行job。</p>
<p>   <strong>第一点Graph图构建封装</strong>：是核心类 graph storm中的拓扑图结构，有向无环图DAG 顶点与边组成<br><img src="http://autometis.oss-cn-shanghai.aliyuncs.com/automl/toplogy%E5%B0%81%E8%A3%85%E9%A1%B6%E7%82%B9%E8%BE%B9.png" alt><br>jgrapht 转为graphml 系列化存储以及jsplumb可视化。<br><img src="http://autometis.oss-cn-shanghai.aliyuncs.com/automl/%E6%B5%81%E7%A8%8Bjsplumb%E4%BB%8Egraphml%E8%BD%BD%E5%85%A5%E5%8F%AF%E8%A7%86%E5%8C%96.png" alt></p>
<p>演示：<br><img src="http://autometis.oss-cn-shanghai.aliyuncs.com/automl/%E8%BF%9B%E8%A1%8C%E6%B5%81%E7%A8%8B%E5%8F%AF%E8%A7%86%E5%8C%96%E5%88%9B%E5%BB%BA.png" alt></p>
<p><img src="http://autometis.oss-cn-shanghai.aliyuncs.com/automl/%E8%BF%9B%E8%A1%8C%E6%B5%81%E7%A8%8B%E5%8F%AF%E8%A7%86%E5%8C%96%E5%88%9B%E5%BB%BA1.png" alt></p>
<p><img src="http://autometis.oss-cn-shanghai.aliyuncs.com/automl/%E8%BF%9B%E8%A1%8C%E6%B5%81%E7%A8%8B%E5%8F%AF%E8%A7%86%E5%8C%96%E5%88%9B%E5%BB%BA2.png" alt></p>
<p><img src="http://autometis.oss-cn-shanghai.aliyuncs.com/automl/%E8%BF%9B%E8%A1%8C%E6%B5%81%E7%A8%8B%E5%8F%AF%E8%A7%86%E5%8C%96%E5%88%9B%E5%BB%BA%E8%8A%82%E7%82%B9%E5%8F%82%E6%95%B0%E5%80%BC%E8%AE%BE%E7%BD%AE.png" alt></p>
<p><img src="http://autometis.oss-cn-shanghai.aliyuncs.com/automl/%E8%8A%82%E7%82%B9%E7%B1%BB%E5%88%AB.png" alt></p>
<p><img src="http://autometis.oss-cn-shanghai.aliyuncs.com/automl/%E8%8A%82%E7%82%B9%E5%88%97%E8%A1%A8.png" alt></p>
<p><img src="http://autometis.oss-cn-shanghai.aliyuncs.com/automl/%E8%8A%82%E7%82%B9%E5%8F%82%E6%95%B0%E9%85%8D%E7%BD%AE.png" alt></p>
<p><img src="http://autometis.oss-cn-shanghai.aliyuncs.com/automl/%E6%B5%81%E7%A8%8B%E9%93%BE%E6%8E%A5%E4%B8%8E%E4%BF%9D%E5%AD%98.png" alt></p>
<p><img src="http://autometis.oss-cn-shanghai.aliyuncs.com/automl/%E6%B5%81%E7%A8%8B%E5%88%9B%E5%BB%BA.png" alt></p>
<p><img src="http://autometis.oss-cn-shanghai.aliyuncs.com/automl/%E6%B5%81%E7%A8%8B%E4%BF%9D%E5%AD%98.png" alt></p>
<p><strong>第二点 spark datasource  transformer estimator封装</strong></p>
<p><img src="http://autometis.oss-cn-shanghai.aliyuncs.com/automl/%E9%A1%B9%E7%9B%AE%E6%A8%A1%E5%9D%97.png" alt></p>
<p><img src="http://autometis.oss-cn-shanghai.aliyuncs.com/automl/%E6%95%B4%E5%90%88%E4%B8%80%E4%BA%9Bspark%E6%A8%A1%E5%9D%97%E5%AE%9E%E7%8E%B0%E4%B8%80%E4%BA%9B%E7%89%B9%E5%BE%81%E5%A4%84%E7%90%86%E6%96%B9%E6%B3%95.png" alt></p>
<p><img src="http://autometis.oss-cn-shanghai.aliyuncs.com/automl/python%E4%BB%A3%E7%A0%81%E6%B5%8B%E8%AF%95%E4%BB%A5%E5%8F%8A%E5%B0%81%E8%A3%85.png" alt></p>
<p><img src="http://autometis.oss-cn-shanghai.aliyuncs.com/automl/pyspark%E4%B8%80%E4%BA%9B%E6%B5%8B%E8%AF%95%E4%BB%A5%E5%8F%8A%E7%89%B9%E5%BE%81%E5%B0%81%E8%A3%85.png" alt></p>
<p><img src="http://autometis.oss-cn-shanghai.aliyuncs.com/automl/python_template.png" alt></p>
<p>在spark mlib基础<br>整合了spark 一些相关库<br>mmlspark bigDL H2O xgboost lightgbm 另外自己也实现了一些estimator 采样 异常点 以及除去NAN 去除重复，除去高基数，编码等等,自定义扩展了一些数据源比如更好的hbase 阿里云的tablestore 以及 tushare查询A股股票数据。另外因为pyspark py4j关系，所以可以通过py4j 实现python相关方法比如bert 文本特征提取然后scala pyspark可以直接调用，原理是因为 在pyspark中把相关bert处理 注册为UDF，但是这个UDF 是python UDF ，所以在scala 使用时候需要实现相应的转换 转换成UserDefinedPythonFunction 就可以在scala中使用了，同时因为新版本支持pandas_udf 所以可以支持sklearn相关包一些transformer可以使用了。<br>这里我定义了一个tushare 查询A股股票以及bert模型支持（内存占用太大，在解决）。<br><img src="http://autometis.oss-cn-shanghai.aliyuncs.com/automl/tushare%E6%94%AF%E6%8C%81.png" alt><br>比如fastText预训练模型可以直接pyspark 方式 也可以直接bigDL 来加载，在工作中偶尔会用到，通过bigDL keras 嵌入层 加载 dense层加载方式可以实现estimator， 还有很多比如上下采样实现，还有一些特征工程套路，我就直接使用UDF来定义（pyarrow支持pandas）就好了。<br><img src="http://autometis.oss-cn-shanghai.aliyuncs.com/automl/fastText01.png" alt></p>
<p><img src="http://autometis.oss-cn-shanghai.aliyuncs.com/automl/fastText02.png" alt></p>
<p><img src="http://autometis.oss-cn-shanghai.aliyuncs.com/automl/bert%E6%A8%A1%E5%9E%8B.png" alt></p>
<p>可惜的是bert展示只能本地运行，因为线上依赖预训练模型，需要通过spark addFile addJar 加入来获取地址 spark.get获取相关模型来分布式读取预训练模型，所以这类很多相关的先见依赖的工作。比如pip setup构建python本地包，以及拷贝这类文件工作我后面打算用docker 来管理，使用K8S来自动编排.平时时间不多这一步还没完成 K8S也在研究。</p>
<p>第三部就是 动态代码生成：<br>通过图的遍历，来获取节点，然后搭积木方式来生成相关xml 以及相关代码。这里我完整实现了spring的xml的 构建生成。因为大部分时间在实现spark那些datasource estimatro transformer 自定义udf所以spark的代码只实现了部分。<br>这是spring integation封装<br><img src="http://autometis.oss-cn-shanghai.aliyuncs.com/automl/springintegration%E5%B0%81%E8%A3%85.png" alt></p>
<p><img src="http://autometis.oss-cn-shanghai.aliyuncs.com/automl/springintegration%E5%B0%81%E8%A3%852.png" alt></p>
<p><img src="http://autometis.oss-cn-shanghai.aliyuncs.com/automl/%E5%BC%82%E6%AD%A5%E5%AE%A1%E6%89%B9%E6%B5%81%E7%A8%8B%E5%B0%81%E8%A3%85.png" alt></p>
<p><img src="http://autometis.oss-cn-shanghai.aliyuncs.com/automl/%E6%B5%81%E7%A8%8B%E5%9B%BE%E7%A7%AF%E6%9C%A8%E6%9E%84%E5%BB%BA.png" alt><br>对于spark引擎封装主要<br>实现链式<br><img src="http://autometis.oss-cn-shanghai.aliyuncs.com/automl/python_template.png" alt><br>比如<br><img src="http://autometis.oss-cn-shanghai.aliyuncs.com/automl/pyspark%20%E9%93%BE%E5%BC%8F.png" alt><br>对于pyspark<br>通过freemarker引擎 来生成spark代码 直接填充pyspark代码链式块就可以了，这一部分因为节点太多，没有完整完成。</p>
<p><img src="http://autometis.oss-cn-shanghai.aliyuncs.com/automl/spark%E6%9E%84%E5%BB%BA1.png" alt></p>
<p><img src="http://autometis.oss-cn-shanghai.aliyuncs.com/automl/sparkgoujian2.png" alt></p>
<p><img src="http://autometis.oss-cn-shanghai.aliyuncs.com/automl/spark%20%E6%9E%84%E5%BB%BA3.png" alt></p>
<p><img src="http://autometis.oss-cn-shanghai.aliyuncs.com/automl/spark%E4%B8%80%E4%BA%9B%E5%B8%B8%E7%94%A8%E7%89%B9%E5%BE%81%E5%B7%A5%E7%A8%8B%E6%96%B9%E5%BC%8F.png" alt></p>
<p>为了方便sdk使用采用<br>stepBuilder构建模式进行约束<br><img src="http://autometis.oss-cn-shanghai.aliyuncs.com/automl/stepBuilder%E6%9E%84%E5%BB%BA%E6%A8%A1%E5%BC%8F.png" alt></p>
<p>因为spark 的没有封装完，这里演示 spring的版本：<br><img src="http://autometis.oss-cn-shanghai.aliyuncs.com/automl/spring01.png" alt></p>
<p><img src="http://autometis.oss-cn-shanghai.aliyuncs.com/automl/spring2.png" alt></p>
<p>总结：<br>时间原因过多浪费在页面以及spark 算法 特征工程节点的工作上，以及研究k8s自动编排上并没有完成整个项目，所以这里只演示展示了个人项目的部分代码。个人比较擅长大数据 机器学习算法工程方面。可以熟练使用各类算法 以及深度学习算法在spark中部署应用。能够python scala java 混合开发。能够把python sklearn 相关包大数据工程化。上面这个项目主要是自己学习项目，一方面可以通过这个项目来了解使用各类算法，另外一方面是希望能做一个好的开源项目。后面我打算实现几个方面：<br>  1.引入K8S自动编排<br>  2.实现页面配置python 代码以及Java spi模块插件，动态定义UDF 来自定义数据节点<br>  3.实现BigDL的研究想实现keras 深度学习模型自定义<br>  4.整合成功bert 还有一些常用的深度学习模型 一些常用特征工程套路到spark工具包中。<br>  5.引入sqlparser 扩展SQL引擎使其可以通过SQL 实现机器学习的更便捷查询语法。<br>  6.支持更多可视化比如现在整合的handspark只支持简单的直方图。箱图<br>  7.研究mleap 来尝试实现发布部署sdk 然后通过flink来部署上线进行相关预测。<br>  8.通过个人学习项目来尝试研究图来尝试元学习以及图 来实现一些automl。学习更多的算法知识。</p>
<h5 id="这里带上个人一些个人评价吧："><a href="#这里带上个人一些个人评价吧：" class="headerlink" title="这里带上个人一些个人评价吧："></a>这里带上个人一些个人评价吧：</h5><ul>
<li>个人学习能力强，而且性格开朗，沟通能力好，注重团队协作精神，比较有思想会思考，特别是创业经历对个人影响最深刻，对技术比较爱好，技术方面自己对spark scala大数据机器学习方面以及分布式开发有较深涉入,一直在研究学习，还擅长大数据机器学习，深度学习工程 特征工程应用方面。</li>
</ul>
<ul>
<li>也许显得工作频繁，其实自己发展运道不怎么好，一直想进大公司稳定，因为刚毕业几年在小公司不是公司倒闭就是部门撤销，有时候也是无可奈何，后来创业也失败了，花光了70万，至今还有一些欠款，一直颠破流离吧，在小公司能力天花板有限，个人学习能力快，可是小公司能力强，投简历也进不了大公司初步刷选，后来通过通过一步步来到喜马拉雅，来到美团，觉得可以稳定下来的，后来美团开始大批裁员，很多旁边熟悉的人都走了，现在部门好多都人心惶惶，这期间本来自己要负责生活费产品的，后来生活费给更有资历的人，我便负责收银台分期与名单，结果收银台分期下线，名单系统优先级降低，但是个人觉得无愧于心，后来另外组没开始开发就发博文，占坑先抢到知识图谱的项目，所以现在一直在负责数据平台相关工作以及部分模型相关工作。对个人成长发展其实并不好，最近只是在看看机会，想进去大公司，能够稳定能够有大把能展现自己的机会的公司。</li>
</ul>
</div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="mailto:undefined">zhuyuping</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="http://yoursite.com/2019/02/20/automl/">http://yoursite.com/2019/02/20/automl/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="post-meta__tag-list"></div><nav id="pagination"></nav></div></div><footer><div class="layout" id="footer"><div class="copyright">&copy;2013 - 2019 By zhuyuping</div><div class="framework-info"><span>Driven - </span><a href="http://hexo.io"><span>Hexo</span></a><span class="footer-separator">|</span><span>Theme - </span><a href="https://github.com/Molunerfinn/hexo-theme-melody"><span>Melody</span></a></div><div class="busuanzi"><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><span id="busuanzi_container_page_pv"><i class="fa fa-file-o"></i><span id="busuanzi_value_page_pv"></span><span></span></span></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><script src="https://cdn.jsdelivr.net/npm/animejs@latest/anime.min.js"></script><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-animate@latest/velocity.min.js"></script><script src="https://cdn.jsdelivr.net/npm/velocity-ui-pack@latest/velocity.ui.min.js"></script><script src="/js/utils.js?version=1.6.0"></script><script src="/js/fancybox.js?version=1.6.0"></script><script src="/js/sidebar.js?version=1.6.0"></script><script src="/js/copy.js?version=1.6.0"></script><script src="/js/fireworks.js?version=1.6.0"></script><script src="/js/transition.js?version=1.6.0"></script><script src="/js/scroll.js?version=1.6.0"></script><script src="/js/head.js?version=1.6.0"></script><script>if(/Android|webOS|iPhone|iPod|BlackBerry/i.test(navigator.userAgent)) {
  $('#nav').addClass('is-mobile')
  $('footer').addClass('is-mobile')
}</script></body></html>